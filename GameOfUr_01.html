<script>

//These two rows just for development purpose...
var player1 = "Player one"
var player2 = "Player two"
//Made a variable to check if player is is trying to make a valid move.
var move = "stay"
/* hiding this part for the moment so I wont have to go trough with this every test
//Player set up	

	for(var player1;Boolean(player1)== 0;player1){
		var player1 = prompt("Enter name of player one");
	}
	for(var player2;Boolean(player2)==0;player2){
		var player2 = prompt("Enter name of player two");
	}
*/
//Turn order made
	var turn = 0
	//order can be used as a variable for variables to get a number correlating to a player
	var order = 0
	var player = "Not Yet assigned";
		function turnOrder(){
			turn ++
			if(turn % 2 == 0){
				player = player2
				order = 0
			}
			else{
				player = player1
				order = 1
			}
		}

//the DICE setup, and the random generator function
	var die1 = 0
	var die2 = 0
	var die3 = 0
	var die4 = 0
	var result = die1+die2+die3+die4
	function roll(){
		die1 = Math.round(Math.random())
		//console.log("First die rolled "+die1)
		die2 = Math.round(Math.random())
		//console.log("Second die rolled "+die2)
		die3 = Math.round(Math.random())
		//console.log("Third die rolled "+die3)
		die4 = Math.round(Math.random())
		//console.log("Fourth die rolled "+die4)
		result = (die1+die2+die3+die4)
		//console.log("For a total of "+(die1+die2+die3+die4))
}
//No code in this part. Just rules
//Explanation off the rules
	var rules = "The Rules for 'Game of Ur'!\nTo access the rules again, enter 'rules' on your turn!\n\nEach Player has 3 pawns each.\nThe first player to get all pawns from start to finnish wins!\n\n"+
		"You each roll 4 dice that can each show a 1 or 0 and you are allowed to move the combined amount.\n"+
		"That means you can get everything from 0 to 4 steps! All steps need to be taken by one pawn each turn.\n"+
		"If your pawn land on the same pawn as the other players pawn, that pawn is knocked off the board and has to start from the beginning!\n\n"+
		player1+" starts at 1 on the top row at 1,2... and goes off the board at ...13,14\n"+
		player2+" does the same but on the bottom row.\n"+
		"This means you're not safe on the middle row, i.e square 5 to 12!\n\nThe board:\n"+

		"\n{4}[3][2][1]<-___{14}[13]----->"+player1+" pawns are X₁,X₂...\n"+
		    "[5][6][7]{8}[9][10][11][12]\n"+
		    "{4}[3][2][1]<- ͞ ͞ ͞ ͞ ͞{13}[14]----->"+player2+" pawns are O₁,O₂..."
		//A secondary set of rules that can be used in the background
	var rules2 = "The Rules for 'Game of Ur'!<br>To access the rules again, enter 'rules' on your turn!<br><br>Each Player has 3 pawns each.<br>The first player to get all pawns from start to finnish wins!<br><br>"+
		"You each roll 4 dice that can each show a 1 or 0 and you are allowed to move the combined amount.<br>"+
		"That means you can get everything from 0 to 4 steps! All steps need to be taken by one pawn each turn.<br>"+
		"If your pawn land on the same pawn as the other players pawn, that pawn is knocked off the board and has to start from the beginning!<br><br>"+
		player1+" starts at 1 on the top row at 1,2... and goes off the board at ...13,14<br>"+
		player2+" does the same but on the bottom row.<br>"+
		"This means you're not safe on the middle row, i.e square 5 to 12!<br><br>The board:<br>"+

		"<br>{4}[3][2][1]<-___{14}[13]----->"+player1+" pawns are X₁,X₂...<br>"+
		    "[5][6][7]{8}[9][10][11][12]<br>"+
		    "{4}[3][2][1]<- ͞ ͞ ͞ ͞ ͞{13}[14]----->"+player2+" pawns are O₁,O₂..."
			 

		



alert(rules);
document.write(rules2);
//game board
	//No Square bottom
	var noSqb = "___";
	//NoSquare top
	var noSqt = " ͞ ͞ ͞ ͞ ͞"
	//empty board square
	var eSq = "[  ]";
	//"empty flower empty square"
	var feSq = "{  }"
	var startSq = "<-"


//Lets make the first pawn(S)
	//Player 1 pawn status

	var p1p1 = "X₁";
	var p1p2 = "X₂";
	var p1p3 = "X₃";
	//Putting the pawn "graphics" into an array
	var p1Pawns = ["[X₁]","[X₂]","[X₃]"];
	//Panws not yet played
	var p1Unplayed = [p1p1,p1p2,p1p3];
	//Pawns on the board
	var p1Playing = [];
	//Pawns that has entered goal.
	var p1Goal = [];

	//player 2 pawn status
	
	var p2p1 = "O₁";
	var p2p2 = "O₂"	;
	var p2p3 = "O₃";
	var p2Pawns = ["[O₁]","[O₂]","[O₃]"];
	var p2Unplayed = [p2p1,p2p2,p2p3];
	var p2Playing = [];
	var p2Goal = [];
	/*
	Array deciding players pawn location. Each one corresponding a player pawn. pawnLoc for pawnLocation
	PawnLoc[0] beeing player 1 pawn 1. PawnLoc[1] beeing player 1 pawn 2 and so on.
	Make 2 arrays one for each player. So that I can compare arrays, and increase the number of pawns.
	*/
	var pawnLoc1 = [0,0,0];
	var pawnLoc2 = [0,0,0];
	var currentPawn = 0
	//Variables i can use with a return value later.
	var thePawn = "Target pawn not yet Assigned";
	var toLocation = "Target square not yet assigned";

//the array making up the game board, made on separate lines for easier programming.
var board = [
	[feSq,eSq,eSq,eSq,startSq,noSqb,feSq,eSq,],
	[eSq,eSq,eSq,feSq,eSq,eSq,eSq,eSq,],
	[feSq,eSq,eSq,eSq,startSq,noSqt,feSq,eSq,]
]
//delete this...maby
var Board2 = [eSq,eSq,eSq,feSq,eSq,eSq,eSq,feSq,eSq,eSq,eSq,eSq,eSq,feSq]


//this is currently what Im working with.
var board3 = [
[eSq,eSq,eSq,eSq,],//Player1 first 4 
[eSq,eSq,eSq,eSq,],//player2 first 4
[eSq,eSq,eSq,eSq,eSq,eSq,eSq,eSq],//Main row
[eSq,eSq,],//player1 last 2
[eSq,eSq,]//player2 last 2
];

//The UI OLD UI.
/*
var boardUi = (
	player1+":\nUnplayed Pawns: "+p1Unplayed +"	Pawns in goal:"+p1Goal+" \n\n"+
	board[0]+"\n"+board[1]+"\n"+board[2]+
	"\n\n"+player2+":\nUnplayed Pawns: "+p2Unplayed+"		Pawns in goal:"+p2Goal
);
*/
//The NEW board UI
var boardUi = (
	player1+":\nUnplayed Pawns: "+p1Unplayed +"	Pawns in goal:"+p1Goal+" \n\n"+

	board3[0][3]+board3[0][2]+board3[0][1]+board3[0][0]+" _____"+board3[3][0]+board3[3][1]+
	"\n"+board3[2][0]+board3[2][1]+board3[2][2]+board3[2][3]+board3[2][4]+board3[2][5]+board3[2][6]+board3[2][7]+"\n"+
	board3[1][3]+board3[1][2]+board3[1][1]+board3[1][0]+" ͞ ͞ ͞ ͞ ͞ ͞ ͞ ͞ " +board3[4][0]+board3[4][1]+

	"\n\n"+player2+"+\nUnplayed Pawns: "+p2Unplayed+"		Pawns in goal:"+p2Goal
);




//feedback to invalid moves for the player
var goalMsg = "This pawn has already entered goal and cant pe moved any more!\n" + player + ", please pick another pawn!";
var occupiedMsg = "This square is already occupied by one of your pawns!\n "+ player +", please pick another pawn!";


//Function to validate and execute the players move.  validates if the pawn is in play and not trying to move to an occupied square.
function validateMove(){
	//player ones validation
	console.log("CurrentPawn is " + currentPawn);
	if(player == player1){
		//Need to make sure that the pawn isn't at goal.
		if(pawnLoc1[currentPawn-1] >= 15){
			alert(goalMsg);
		}
		//Or have another pawn at the location. Need to make sure it still
		else if(pawnLoc1.includes(pawnLoc1[currentPawn-1]+result)){
			alert(occupiedMsg);1
		}
		else{
			pawnLoc1[(currentPawn-1)] += result
			move = "move"
		}
	}
	else{//player == player2
		if(pawnLoc2[(currentPawn-1)] >= 15){
			alert(goalMsg);
		}
		else if(pawnLoc2.includes(pawnLoc2[currentPawn-1]+result)){
			alert(occupiedMsg)
		}
		else{
			pawnLoc2[(currentPawn-1)] += result
			//This is a valid move, this is to stop the loop.
			move = "move"
		}
	}
}

//Further validation and move function.
function movePawn(){
	
	for(move ;move != "move";move){
		//User(hopefully) picks a pawn. 
		currentPawn = parseInt(prompt(player +" rolled "+ result+"!\nPlease pick a pawn to move "+result+" steps!\n\n"+boardUi));
		//If the player doesn't pick a pawn.
		if (Boolean(currentPawn) == false){
			alert("Please pick a pawn!(ง •̀_•́)ง");
		}
		//If the player choose a pawn above how many pawns the player has. Chose to make it pawnLoc1.length in case I add more pawns later on. I use pawnLoc1, but both players should have sama amount of pawns
		else if (currentPawn > pawnLoc1.length){
			alert("You dont have "+currentPawn+" pawns...");
		}
		//Validate the move.
		else{
			validateMove();
		}
	}
	console.log("Player one array " + pawnLoc1);
	console.log("Player two array " + pawnLoc2);
	//resetting the variables for the next turn user picks it.
}

//Function getPawn and findSquare to get the pawn UI depending on user choise. And I get to try the return function! ¯\_(ツ)_/¯
function getPawn(pawnUI){
		if(player == player1){
			return pawnUI = p1Pawns[(currentPawn - 1)]
		}
		else{//player == player2
			return pawnUI = p2Pawns[(currentPawn - 1)]
		}
}
//Function to fin the square to replace with pawn UI.
function findSquare(SqUI){
		if(player == player1){
			//Find the number that is on this location to get a number that can correlate with a square
			return sqUI = pawnLoc1[currentPawn-1]
		}
		else{//player == player2
			return sqUI = pawnLoc2[currentPawn-1]
		}
}

//thePawn = getPawn(thePawn); Is the pawn GRAPHICS!
//toLocation = findSquare(toLocation); Gives me the NUMMBER that will coorelate to a square!

function updUI(){
	var row = 0
	var column = 0
	
	if(toLocation >=5 && toLocation<=12){
		row = 2
		column = toLocation-5
	}
	else if(player == player1){
		if(toLocation <=4){
			row = 0
			column = toLocation
		}
		else{
			row = 3
			column = tolocation-12
		}
	}
	else{//player == player 2
		if(toLocation<=2){
			row = 1
			column = toLocation
		}
		else{
			row = 4
			column = tolocation-12
		}
	}
	
	//Finally replaces the UI
	board3[row][column] = thePawn
}


//Function to reset some values that need resetting each turn. Not sure if all needed, but there as a failsafe.
function reset(){
	move = "stay"
	currentPawn = 0
}

//The WIN CONDITION beeing "GameOver = isOver", that will be included in the for loop making the game go on.
function winCheck(){
	if((p1Goal.length || p2Goal.length) == pawnLoc1.length){
		GameOver = "isOver"
	}
	else{
		GameOver = "notOver"
	}
}

alert(boardUi);
//variable for win condition made
	//var GameOver = "NotYetAssigned";
	//console.log(GameOver);
	console.log(p1Playing.length)
	console.log(p2Playing.length)



//The play loop, this is the GAMEPLAY GAMEPLAY GAMEPLAY GAMEPLAY!!!
for(var GameOver = "NotYetAssigned";GameOver != "isOver";GameOver){
	//Dediding who's turn it is 
	turnOrder();
	//Telling the player whos turn it is.
	alert("It is currently "+ player +" turn!\n Pres 'OK' to roll the Dice!\n\n"+boardUi);
	//Re-rolling the dice to be used to make the move.
	roll();

	if(result == 0){
		//If player rolls a 0, no move can be made, and it is the next players turn to roll
		alert(player + " rolled a 0 and cant move on this turn...Better luck next time!");
	}
		//Otherwise, pick a pawn and move!
	else{
		movePawn();
	}

	//Find what pawn is beeing moved and the square to replace.
	thePawn = getPawn(thePawn);
	toLocation = findSquare(toLocation);

	console.log(player +" moved pawn "+ thePawn + " to square "+ toLocation);

	//Update UI using above variables. thePawn and toLocation
	updUI();

	//reset some variables
	reset();

	//Check if pawns are in goal
	winCheck();

	//Status of the game
	console.log(GameOver)
}

alert("Game Over!");

</script>





